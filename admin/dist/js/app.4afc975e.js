(function(t){function e(e){for(var n,s,a=e[0],l=e[1],c=e[2],f=0,p=[];f<a.length;f++)s=a[f],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&p.push(o[s][0]),o[s]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);u&&u(e);while(p.length)p.shift()();return r.push.apply(r,c||[]),i()}function i(){for(var t,e=0;e<r.length;e++){for(var i=r[e],n=!0,a=1;a<i.length;a++){var l=i[a];0!==o[l]&&(n=!1)}n&&(r.splice(e--,1),t=s(s.s=i[0]))}return t}var n={},o={app:0},r=[];function s(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=t,s.c=n,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(i,n,function(e){return t[e]}.bind(null,n));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],l=a.push.bind(a);a.push=e,a=a.slice();for(var c=0;c<a.length;c++)e(a[c]);var u=l;r.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"0a69":function(t,e,i){},1:function(t,e){},2:function(t,e){},"437a":function(t,e,i){},5056:function(t){t.exports=JSON.parse('{"alert-triangle":{"attributes":{"xmlns":"http://www.w3.org/2000/svg","width":"1em","height":"1em","viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},"content":"<path d=\\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\\"/><line x1=\\"12\\" y1=\\"9\\" x2=\\"12\\" y2=\\"13\\"/><line x1=\\"12\\" y1=\\"17\\" x2=\\"12\\" y2=\\"17\\"/>"},"check-circle":{"attributes":{"xmlns":"http://www.w3.org/2000/svg","width":"1em","height":"1em","viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},"content":"<path d=\\"M22 11.08V12a10 10 0 1 1-5.93-9.14\\"/><polyline points=\\"22 4 12 14.01 9 11.01\\"/>"},"spinner":{"attributes":{"width":"1em","height":"1em","viewBox":"0 0 38 38","xmlns":"http://www.w3.org/2000/svg","stroke":"currentColor"},"content":"<g fill=\\"none\\" fill-rule=\\"evenodd\\"><g transform=\\"translate(1 1)\\" stroke-width=\\"2\\"><circle stroke-opacity=\\".5\\" cx=\\"18\\" cy=\\"18\\" r=\\"calc(50% - 2px)\\"/><path d=\\"M36 18c0-9.94-8.06-18-18-18\\"><animateTransform attributeName=\\"transform\\" type=\\"rotate\\" from=\\"0 18 18\\" to=\\"360 18 18\\" dur=\\"1s\\" repeatCount=\\"indefinite\\"/></path></g></g>"},"x-circle":{"attributes":{"xmlns":"http://www.w3.org/2000/svg","width":"1em","height":"1em","viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},"content":"<circle cx=\\"12\\" cy=\\"12\\" r=\\"10\\"/><line x1=\\"15\\" y1=\\"9\\" x2=\\"9\\" y2=\\"15\\"/><line x1=\\"9\\" y1=\\"9\\" x2=\\"15\\" y2=\\"15\\"/>"}}')},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var n=i("2b0e"),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[t.ready?i("div",[i("Nav"),"pictifly"===this.$store.state.current?i("Settings"):t._e(),"pictifly-compress"===this.$store.state.current?i("Compress"):t._e(),"pictifly-regenerate"===this.$store.state.current?i("Regenerate"):t._e(),"pictifly-crawler"===this.$store.state.current?i("SitemapCrawler"):t._e(),"pictifly-tools"===this.$store.state.current?i("Tools"):t._e()],1):t._e()])},r=[],s=(i("d3b7"),i("ac1f"),i("3ca3"),i("841c"),i("ddb0"),i("2b3d"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"crawler"},[t._m(0),i("div",{staticClass:"crawler__actions"},[i("div",{staticClass:"crawler__action"},[i("label",{attrs:{for:"togglebtn"}},[t._v("Manual mode")]),i("toggle-button",{attrs:{color:"#5bd05b",width:60,height:25,"font-size":18,labels:{checked:"on",unchecked:"off"}},model:{value:t.manual,callback:function(e){t.manual=e},expression:"manual"}})],1),t.manual?i("div",{staticClass:"crawler__action"},[t._m(1),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.manualUrls,expression:"manualUrls"}],attrs:{id:"textareaurls"},domProps:{value:t.manualUrls},on:{input:[function(e){e.target.composing||(t.manualUrls=e.target.value)},t.formatManual]}})]):i("div",{staticClass:"crawler__action"},[i("label",{attrs:{for:"sitemapurl"}},[t._v("Sitemap URL")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.sitemap,expression:"sitemap"}],attrs:{id:"sitemapurl",type:"text"},domProps:{value:t.sitemap},on:{input:function(e){e.target.composing||(t.sitemap=e.target.value)}}})]),i("ui-button",{attrs:{loading:t.isRunning,color:"white",outline:""},on:{click:t.handleClick}},[t._v("Start Crawling")])],1),i("div",{staticClass:"crawler__scroll"},[i("div",{staticClass:"crawler__sitemap"},t._l(t.urls,(function(e,n){return i("div",{key:"url"+n,staticClass:"crawler__item",class:"crawler__item--"+t.getItemClass(e.status)},[i("a",{attrs:{href:e.loc,target:"_blank"}},[t._v(t._s(e.loc))]),null!==e.status?i("svgicon",{attrs:{icon:t.getIcon(e.status)}}):t._e()],1)})),0)])])}),a=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"crawler__intro pictifly__info"},[t._v(" If you have not created image regeneration functions you can use this tool instead. It will go through each page of your sitemap or given urls one by one to force "),i("strong",[t._v("Pictifly")]),t._v(" to regenerate the images. If you don't have a sitemap you can also enter the urls manually. ")])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("label",{attrs:{for:"textareaurls"}},[t._v("Your urls "),i("small",[t._v("1 url per line")])])}],l=(i("4160"),i("5319"),i("1276"),i("159b"),i("96cf"),i("1da1")),c=i("bc3a"),u=i.n(c),f=i("f206"),p=i("083c").parseString,m={components:{ToggleButton:f["ToggleButton"]},data:function(){return{sitemap:"",isRunning:!1,urls:[],manualUrls:"",manual:!1}},created:function(){this.axiosCatcher()},methods:{formatManual:function(t){this.autoHeight(t);var e=t.target.value;this.manualUrls=e.replace(" ","\n").replace("\n\n","\n")},axiosCatcher:function(){var t=this;u.a.interceptors.response.use((function(t){return t}),(function(e){return"undefined"===typeof e.response&&(alert("A network error occurred. This could be a CORS issue or a dropped internet connection. It is not possible for us to know."),t.isRunning=!1),Promise.reject(e)}))},handleClick:function(){this.isRunning=!0,this.manual?this.buildArrayManual():this.getSitemapXML()},buildArrayManual:function(){var t=this,e=this.manualUrls.split("\n");e.forEach((function(e){e&&t.urls.push({loc:e,status:null})})),this.crawlUrls()},getSitemapXML:function(){var t=this,e=this.sitemap;u.a.get(e).then((function(e){p(e.data,(function(e,i){e?(t.isRunning=!1,alert("Your sitemap url seems not valid !")):t.buildArrayFromSitemap(i.urlset.url)})).catch((function(){t.isRunning=!1,alert("Your sitemap url seems not valid !")}))}))},buildArrayFromSitemap:function(t){var e=this;t.forEach((function(t){t.loc.forEach(function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(i){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.urls.push({loc:i,status:null});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())})),this.crawlUrls()},crawlUrls:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.urls.length>0?this.crawlUrl(0):this.isRunning=!1;case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),crawlUrl:function(t){var e=this;this.$set(this.urls[t],"status","loading"),u.a.get(this.urls[t]).then((function(i){e.$set(e.urls[t],"status",200===i.status),e.nextUrl(t)})).catch((function(){e.$set(e.urls[t],"status",!1),e.nextUrl(t)}))},nextUrl:function(t){this.urls.length-1>=t+1?this.crawlUrl(t+1):this.isRunning=!1},getIcon:function(t){return!0===t?"check-circle":!1===t?"x-circle":"spinner"},getItemClass:function(t){return!0===t?"done":!1===t?"false":"loading"===t?"spinner":"queue"}}},d=m,h=(i("cd0c"),i("2877")),g=Object(h["a"])(d,s,a,!1,null,"02f96879",null),_=g.exports,v=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"setting"},[t.success?i("div",{staticClass:"updated notice notice-success"},[t._v(" Settings Saved ")]):t._e(),i("div",{staticClass:"setting__wrap"},[i("div",{staticClass:"setting__item"},[i("label",{staticClass:"setting__label",attrs:{for:"use_imgix"}},[t._v(" Enabled imgix CDN")]),t._m(0),i("toggle-button",{attrs:{id:"use_imgix",color:"#5bd05b",sync:!0,width:60,height:25,"font-size":18,labels:{checked:"on",unchecked:"off"}},model:{value:t.imgix,callback:function(e){t.imgix=e},expression:"imgix"}})],1),t.imgix?i("div",{staticClass:"setting__item"},[i("label",{staticClass:"setting__label",attrs:{for:"imgix_url"}},[t._v(" Imgix url ")]),t._m(1),i("input",{directives:[{name:"model",rawName:"v-model",value:t.imgixUrl,expression:"imgixUrl"}],attrs:{type:"text",id:"imgix_url",name:"imgix_url",placeholder:"yourcompany.imgix.com"},domProps:{value:t.imgixUrl},on:{input:function(e){e.target.composing||(t.imgixUrl=e.target.value)}}})]):t._e(),i("div",{staticClass:"setting__item"},[i("label",{staticClass:"setting__label",attrs:{for:"lazyload"}},[t._v(" Enabled LazyLoad ")]),i("toggle-button",{attrs:{id:"lazyload",sync:!0,color:"#5bd05b",width:60,height:25,"font-size":18,labels:{checked:"on",unchecked:"off"}},model:{value:t.lazyload,callback:function(e){t.lazyload=e},expression:"lazyload"}})],1),i("div",{staticClass:"setting__item"},[i("label",{staticClass:"setting__label",attrs:{for:"pictifly_quality"}},[t._v(" Pictifly image quality ")]),t._m(2),i("input",{directives:[{name:"model",rawName:"v-model",value:t.pictiflyQuality,expression:"pictiflyQuality"}],attrs:{type:"number",min:"0",max:"100",id:"pictifly_quality",name:"pictifly_quality"},domProps:{value:t.pictiflyQuality},on:{input:[function(e){e.target.composing||(t.pictiflyQuality=e.target.value)},t.validatePictiflyQuality]}})]),i("div",{staticClass:"setting__item"},[i("label",{staticClass:"setting__label",attrs:{for:"compression_quality"}},[t._v(" Compression quality ")]),t._m(3),i("input",{directives:[{name:"model",rawName:"v-model",value:t.compressionQuality,expression:"compressionQuality"}],attrs:{type:"number",min:"0",max:"95",id:"compression_quality",name:"compression_quality"},domProps:{value:t.compressionQuality},on:{input:[function(e){e.target.composing||(t.compressionQuality=e.target.value)},t.validateCompressionQuality]}})]),i("ui-button",{attrs:{loading:t.isRunning,color:"white",outline:""},on:{click:t.save}},[t._v("Save")]),!1!==t.confirmation?i("ConfirmationModal",{attrs:{title:t.confirmation.title,confirmText:t.confirmation.confirmText,confirmColor:"green"},on:{confirm:function(e){return t.confirmation.callback()},close:t.closeConfirmation}},t._l(t.confirmation.content,(function(e,n){return i("div",{key:"confirmationcontent"+n,staticClass:"confirmation__content__item"},[i("div",[i("svgicon",{attrs:{icon:"alert-triangle"}}),t._v(t._s(" "+e.text))],1),e.small?i("small",[t._v(t._s(e.small))]):t._e()])})),0):t._e()],1)])},y=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"setting__description"},[t._v(" If you want to use imgix to generate and store your image size, you need first to "),i("a",{attrs:{rel:"noopener noreferrer",href:"https://dashboard.imgix.com/sign-up",target:"_blank"}},[t._v("create an account")]),t._v(" on imgix ")])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"setting__description"},[t._v(" p.ex: pictifly.imgix.net. "),i("br"),t._v(" (Note: Your imgix url should point in your root path of WordPress.) ")])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"setting__description"},[t._v(" Set the quality of the images generated by Pictifly here. Pictifly uses imagick to compress your images. This compression algorithm creates worse results than compression via the browser. If you are planning to use the compression tool we recommend leaving this setting at 100%. "),i("small",[t._v("Note: if you change this setting all your image as to be regenerate")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"setting__description"},[t._v(" Set the compression quality here, the lower the quality, the lighter the image will be. We recommend setting this to 75 "),i("small",[t._v("Note: if you change this setting you need to rerun compression tool")])])}],b=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"confirmation"},[i("div",{staticClass:"confirmation__backdrop",on:{click:t.closeConfirmation}}),i("div",{staticClass:"confirmation__wrap"},[i("div",{staticClass:"confirmation__title"},[t._v(t._s(t.title))]),i("div",{staticClass:"confirmation__description"},[t._t("default")],2),i("div",{staticClass:"confirmation__actions"},[i("ui-button",{attrs:{color:"white",outline:""},on:{click:t.closeConfirmation}},[t._v("Cancel")]),i("ui-button",{attrs:{color:t.confirmColor},on:{click:function(e){return t.$emit("confirm")}}},[t._v(t._s(t.confirmText))])],1)])])},w=[],x={props:{title:{default:"Confirmation"},confirmText:{default:"confirm"},confirmColor:{default:"red"}},data:function(){return{}},methods:{closeConfirmation:function(){this.$emit("close")}}},C=x,k=(i("6c8a"),Object(h["a"])(C,b,w,!1,null,"4cc6c3e6",null)),j=k.exports,O=jQuery,P={components:{ToggleButton:f["ToggleButton"],ConfirmationModal:j},data:function(){var t=this.$store.state.pictifly,e=t.nonce,i=t.ajaxUrl;return{success:!1,confirmation:!1,isRunning:!1,imgix:!1,imgixUrl:"",lazyload:!1,compressionQuality:10,pictiflyQuality:100,nonce:e,ajaxUrl:i}},created:function(){this.setOptions()},methods:{setOptions:function(){var t=this.$store.state.pictifly.options;this.imgix=t&&t.imgix,this.imgixUrl=t&&t.imgix_url,this.lazyload=t&&t.lazyload,this.compressionQuality=t&&t.compression_quality,this.pictiflyQuality=t&&t.pictifly_quality},validatePictiflyQuality:function(t){var e=parseInt(t.target.value);this.pictiflyQuality=e>100?100:e<0?0:e},validateCompressionQuality:function(t){var e=parseInt(t.target.value);this.compressionQuality=e>95?90:e<0?0:e},save:function(){var t=[],e=this.$store.state.pictifly.options;e.compression_quality!==this.compressionQuality&&t.push({text:"Are you sure you want to change the compression quality?",small:"This means that all compressed images will be deleted, you will have to regenerate it."}),e.pictifly_quality!==this.pictiflyQuality&&t.push({text:"Are you sure you want to change the quality of the pictifly images?",small:"Be careful, this means that all the images on your site will have to be regenerated. This action can temporarily slow down your site and consume a lot of server resources."}),t.length>0?this.confirmation={title:"Are you sure you want to save these settings?",confirmText:"Confirm",content:t,callback:this.saveSettings}:this.saveSettings()},saveSettings:function(){var t=this;this.confirmation=!1,this.isRunning=!0;var e={action:"pf_save_plugin_settings",nonce:this.nonce,imgix:this.imgix,imgix_url:this.imgixUrl,lazyload:this.lazyload,compression_quality:this.compressionQuality,pictifly_quality:this.pictiflyQuality};O.ajax({type:"post",url:this.ajaxUrl,data:e,success:function(e){t.isRunning=!1,t.success=!0,t.$store.commit("saveOptions",e.data.options),t.setOptions()}})},closeConfirmation:function(){this.confirmation=!1}}},$=P,R=(i("8461"),Object(h["a"])($,v,y,!1,null,"42b85f03",null)),q=R.exports,S=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"compress"},[t._m(0),i("ui-button",{attrs:{loading:t.isRunning},on:{click:function(e){return t.handleClick()}}},[t._v("Start Compression")]),i("div",{staticClass:"compress__progress"},[i("progress-bar",{attrs:{options:t.barOptions,value:t.percent}}),i("small",[t._v(t._s(this.current_item)+" / "+t._s(this.post_count))])],1)],1)},U=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"compress__info pictifly__info"},[t._v(" To not have to use an external service (which will cost you money) and not to be blocked due to the limitations of your hosting provider, "),i("strong",[t._v("Pictifly")]),t._v(" uses your browser to compress your images. This is why we advise you to perform this operation on a recent browser. Before compressing your images, please download and use the "),i("a",{attrs:{rel:"noopener noreferrer",href:"https://www.google.com/chrome/",target:"_blank"}},[t._v("latest version of Google Chrome")]),i("small",[t._v("Please note that you must perform this operation regularly, as your images are not compressed during upload. If you configure "),i("a",{attrs:{rel:"noopener noreferrer",href:"https://www.imgix.com/",target:"_blank"}},[t._v("imgix")]),t._v(" (paid service) in the Pictifly settings you will no longer need to manually compress your images.")])])}],T=(i("a4d3"),i("4de4"),i("d81d"),i("a434"),i("e439"),i("dbb4"),i("b64b"),i("15fd")),z=i("ade3"),E=i("527e"),I=i.n(E),Q=i("7c8d"),M=i.n(Q),A={text:{color:"#FFFFFF",shadowEnable:!0,shadowColor:"#000000",fontSize:20,fontFamily:"Helvetica",dynamicPosition:!0,hideText:!0},progress:{color:"#2dbd2d",backgroundColor:"#ffffff"},layout:{height:200,width:200,verticalTextAlign:100,horizontalTextAlign:100,zeroOffset:0,strokeWidth:10,progressPadding:0,type:"circle"}},D=A;function B(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function N(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?B(Object(i),!0).forEach((function(e){Object(z["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):B(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var F=jQuery,L={data:function(){var t=this.$store.state.pictifly,e=t.ajaxUrl,i=t.nonce,n=t.quality,o=t.max_file_uploads;return{debug:0,current_item:0,post_count:0,isRunning:!1,quality:n,compressedFiles:[],max_file_uploads:o,nonce:i,ajaxUrl:e,percent:0,barOptions:this.getBarOptions()}},components:{ProgressBar:I.a},mounted:function(){},methods:{handleClick:function(){this.isRunning||(this.current_item=0,this.isRunning=!0,this.getAttachments())},getAttachments:function(){var t=this,e={action:"pf_get_attachments",nonce:this.nonce,current_item:this.current_item};F.ajax({type:"post",url:this.ajaxUrl,data:e,error:function(t,e){console.error("response",t),console.error("error",e)},success:function(e){t.post_count=e.data.post_count,t.current_item=e.data.current_item,t.compressImages(e)}})},compressImages:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(e){var i,n,o,r,s,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.data.attachments,n=[],i.forEach((function(t){t.files.forEach((function(t){n.push(a.compressSize(t))}))})),t.next=5,Promise.all(n);case 5:o=t.sent,r=[],s=this.max_file_uploads;while(o.length>0)r.push(o.splice(0,s));return t.next=11,Promise.all(r.map(function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a.uploadCompressedFiles(e);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 11:this.nextPage();case 12:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),compressSize:function(t){var e=this,i=t.url;return new Promise((function(n){fetch(i).then((function(t){return t.blob()})).then((function(i){"text/html"==i.type?(console.error("not image but html",t.url),n(!1)):new M.a(i,{quality:e.quality/100,success:function(e){n(N({},t,{blob:e}))},error:function(t){console.error(t),n(!1)}})}))}))},uploadCompressedFiles:function(t){var e=this;return t.length<1?new Promise((function(t){return t(!1)})):new Promise((function(i){var n=new FormData;n.append("action","pf_upload_compressed_files"),n.append("nonce",e.nonce),t.forEach((function(t,e){var i=t.blob,o=Object(T["a"])(t,["blob"]);n.append(e,i),n.append("attachments_ids[]",o.id),n.append("files_path[]",o.file)})),F.ajax({type:"post",url:e.ajaxUrl,data:n,processData:!1,contentType:!1,error:function(t,e){console.error("response",t),console.error("error",e)},success:function(){i(!0)}})}))},nextPage:function(){this.percent=parseInt(this.current_item/this.post_count*100),this.current_item<this.post_count?this.getAttachments():this.isRunning=!1},getBarOptions:function(){return D}}},Y=L,H=(i("f308"),Object(h["a"])(Y,S,U,!1,null,"577805c7",null)),J=H.exports,W=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"regenerate"},[i("div",{staticClass:"pictifly__info",staticStyle:{"margin-top":"20px"}},[i("small",[t._v("You can also use the "),i("a",{attrs:{href:"javascript:void(0)"},on:{click:function(e){return t.goTo("pictifly-crawler")}}},[t._v("Crawler")]),t._v(" Tool")])]),t.isAllowed?t._e():i("div",[i("div",{staticClass:"pictifly__info"},[t._v(" You need to define your regenerates functions first Example of pictifly regeneration function ")]),i("ui-button",{attrs:{href:"https://gist.github.com/zecka/93d11cd384b6d7d6ca1f846e7c06c9da"}},[t._v("On github")])],1),t.isAllowed?i("div",[i("div",{staticClass:"pictifly__info"},[t._v(' Regenerate your images with to the function created in the "pf_post_images_regenerate" hook. ')]),i("div",{staticClass:"spacer"}),i("ui-button",{attrs:{loading:t.isRunning},on:{click:t.handleClick}},[t._v("Regenerate images")]),i("div",{staticClass:"spacer"}),i("div",[t._v(" "+t._s(t.nbpost)+" posts regenerate"),i("br"),t._v(" "+t._s(t.nbimage)+" image sizes regenerate"),i("br"),i("div",{staticClass:"spacer"}),i("progress-bar",{attrs:{options:t.barOptions,value:t.percent}})],1),i("div",{staticClass:"regenerate__log"},[t.logs?i("ul",t._l(t.logs,(function(e,n){return i("li",{key:"log"+n,staticClass:"regenerate_logitem"},[t._v(" "+t._s(e.title)),i("br"),t._l(e.sizes,(function(e,o){return i("em",{key:"size"+o+"-"+n},[t._v(" "+t._s(e)+" | ")])}))],2)})),0):t._e()])],1):t._e()])},X=[],G=jQuery,V={data:function(){var t=this.$store.state.pictifly,e=t.ajaxUrl,i=t.nonce;return{barOptions:D,nonce:i,ajaxUrl:e,totalpost:0,stopRegeneration:!1,nbpost:0,nbimage:0,percent:0,logs:["test"],isRunning:!1}},components:{},computed:{isAllowed:function(){var t=this.$store.state.pictifly.post_types_regenerate;return t&&t.length}},methods:{handleClick:function(){this.isRunning||(this.nbpost=0,this.nbimage=0,this.percent=0,this.logs=[],this.isRunning=!0,this.getItems())},getItems:function(){var t=this,e={action:"pf_ajax_regenerate_get_items",nonce:this.nonce};G.ajax({type:"post",url:this.ajaxUrl,data:e,success:function(e){t.totalpost=e.data.length,t.regenerateItems(e.data)}})},regenerateItems:function(t){var e=this,i=G.when();t.map((function(t){var n={action:"pf_ajax_item_image_regenerate",id:t.id,post_type:t.post_type,nonce:e.nonce};i=i.then((function(){if(!e.stopRegeneration)return e.regenerateItem(n)}))}))},regenerateItem:function(t){var e=this;return G.ajax({type:"post",url:myAjax.ajaxurl,data:t,success:function(t){e.nbpost=e.nbpost+1,e.progressBar();var i={title:t.data.post,sizes:[]};t.data.sizes.map((function(t){i.sizes.push(t)})),e.logs.push(i),e.nbimage+=t.data.images.length}})},progressBar:function(){var t=this.nbpost/this.totalpost*100;this.percent=Math.round(100*t)/100,100==this.percent&&(this.isRunning=!1)}}},K=V,Z=(i("e0a0"),Object(h["a"])(K,W,X,!1,null,"443e1884",null)),tt=Z.exports,et=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tool"},[!1!==t.confirmation?i("ConfirmationModal",{attrs:{title:t.confirmation.title,confirmText:t.confirmation.action},on:{confirm:function(e){return t.confirmation.callback(t.confirmation)},close:t.closeConfirmation}},[t._v(" Are you sure your want "+t._s(t.confirmation.title)+" ? "),i("small",[t._v("This action can not be undone ! "+t._s(t.confirmation.tip))])]):t._e(),t._l(t.tools,(function(e,n){return i("div",{key:"tool"+n,staticClass:"tool__item"},[i("div",{staticClass:"tool__content"},[i("h3",{staticClass:"tool__title"},[t._v(t._s(e.title))]),i("p",{staticClass:"tool__description"},[t._v(" "+t._s(e.description)+" "),e.tip?i("small",[t._v(t._s(e.tip))]):t._e()])]),i("div",{staticClass:"tool__actions"},[e.done?i("span",[i("svgicon",{attrs:{icon:"check-circle"}}),t._v("Done")],1):i("ui-button",{attrs:{color:"white",outline:"",size:"s",loading:e.loading},on:{click:function(i){return t.toolCallback(e)}}},[t._v(t._s(e.action))])],1)])}))],2)},it=[],nt=jQuery,ot={components:{ConfirmationModal:j},data:function(){var t=this.$store.state.pictifly,e=t.ajaxUrl,i=t.nonce;return{nonce:i,ajaxUrl:e,confirmation:!1,tools:[{title:"Delete all compressed images",description:"Remove all compressed image generated by Pictfifly",tip:null,action:"Delete",callback:this.deleteAllCompressed,confirmation:!0,done:!1,loading:!1},{title:"Delete all Pictifly images",description:"Remove all compressed image generated by Pictfifly",tip:"Be careful, this means that all the images on your site will have to be regenerated. This action can temporarily slow down your site and consume a lot of server resources.",action:"Delete",callback:this.deleteAllImages,confirmation:!0,done:!1,loading:!1},{title:"Remove old pictifly data",description:"Before version 0.4 Pictifly added information about the generated images to the database. This data is no longer used and is therefore not required in your database.",tip:!1,action:"Remove",callback:this.deleteOldData,confirmation:!1,done:!1,loading:!1}]}},methods:{toolCallback:function(t){t.confirmation?this.toolConfirmation(t):t.callback(t)},closeConfirmation:function(){this.confirmation=!1},toolConfirmation:function(t){this.confirmation=t},deleteAllCompressed:function(t){this.confirmation=!1,t.loading=!0;var e={action:"pf_ajax_delete_all_compressed",nonce:this.nonce};nt.ajax({type:"post",url:this.ajaxUrl,data:e,success:function(){t.done=!0}})},deleteAllImages:function(t){this.confirmation=!1,t.loading=!0;var e={action:"pf_ajax_delete_all_image",nonce:this.nonce};nt.ajax({type:"post",url:this.ajaxUrl,data:e,success:function(){t.done=!0}})},deleteOldData:function(t){t.loading=!0;var e={action:"pf_ajax_delete_all_past_data",nonce:this.nonce};nt.ajax({type:"post",url:this.ajaxUrl,data:e,success:function(){t.done=!0}})}}},rt=ot,st=(i("e4a5"),Object(h["a"])(rt,et,it,!1,null,"78dc91ab",null)),at=st.exports,lt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"nav"},[i("div",{staticClass:"nav__title"},[t._v(" Pictifly "),i("small",[t._v("v"+t._s(t.pictifly.version))])]),i("div",{staticClass:"nav__items"},[i("ui-button",{attrs:{color:t.getColor("pictifly")},on:{click:function(e){return t.goTo("pictifly")}}},[t._v("Settings")]),i("ui-button",{attrs:{color:t.getColor("pictifly-regenerate")},on:{click:function(e){return t.goTo("pictifly-regenerate")}}},[t._v("Regenerate")]),i("ui-button",{attrs:{color:t.getColor("pictifly-crawler")},on:{click:function(e){return t.goTo("pictifly-crawler")}}},[t._v("Crawler")]),i("ui-button",{attrs:{color:t.getColor("pictifly-compress")},on:{click:function(e){return t.goTo("pictifly-compress")}}},[t._v("Compress")]),i("ui-button",{attrs:{color:t.getColor("pictifly-tools")},on:{click:function(e){return t.goTo("pictifly-tools")}}},[t._v("Tools")])],1)])},ct=[],ut={name:"Nav",data:function(){return{pictifly:this.$store.state.pictifly}},methods:{getColor:function(t){return this.$store.state.current==t?"primary":"gray"}}},ft=ut,pt=(i("7ac9"),Object(h["a"])(ft,lt,ct,!1,null,"7f29f7dc",null)),mt=pt.exports,dt={name:"app",components:{Nav:mt,Compress:J,Regenerate:tt,Settings:q,SitemapCrawler:_,Tools:at},data:function(){return{ready:!1}},mounted:function(){var t=window.location.search,e=new URLSearchParams(t),i=e.get("page");this.$store.commit("setCurrent",i),this.ready=!0}},ht=dt,gt=(i("5c0b"),Object(h["a"])(ht,o,r,!1,null,null,null)),_t=gt.exports,vt=i("2f62");function yt(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function bt(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?yt(Object(i),!0).forEach((function(e){Object(z["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):yt(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}n["default"].use(vt["a"]);var wt=new vt["a"].Store({state:{current:"pictifly",pictifly:bt({},window.pictifly),$:jQuery},mutations:{setCurrent:function(t,e){n["default"].set(t,"current",e)},saveOptions:function(t,e){n["default"].set(t.pictifly,"options",e)}},actions:{},modules:{}}),xt={methods:{goTo:function(t){var e=window.location.href,i=e.replace(window.location.search,"?page="+t);this.$store.commit("setCurrent",t),history.pushState({},null,i)},publicPath:function(){return this.$store.state.pictifly.publicPath},autoHeight:function(t){t.target.style.height=t.target.scrollHeight+"px"}},data:function(){return{}}},Ct=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.exist?i("svg",t._b({staticClass:"svg-icon",domProps:{innerHTML:t._s(t.content)}},"svg",t.attributes,!1)):i("span",[t._v(t._s(t.icon))])},kt=[],jt=(i("cb29"),i("5056")),Ot={name:"svgicon",props:{icon:{required:!0},width:{required:!1,default:"1em"},height:{required:!1,default:"1em"},color:{required:!1,default:"currentColor"}},computed:{exist:function(){return!!jt[this.icon]},content:function(){return!!jt[this.icon]&&jt[this.icon].content},attributes:function(){var t=jt[this.icon].attributes,e=t.stroke,i=t.fill;return t.width=this.width,t.height=this.height,"currentColor"!==this.color&&(i&&"none"!==i&&(t.fill=this.color),e&&"none"!==e&&(t.stroke=this.color)),t}}},Pt=Ot,$t=Object(h["a"])(Pt,Ct,kt,!1,null,null,null),Rt=$t.exports,qt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(t.theMarkup,{tag:"component",class:t.classes.join(" ")+" "+t.getLoadingClass(),attrs:{to:t.toData,href:t.href},on:{click:function(e){return t.$emit("click")}}},[t.icon?i("span",{staticClass:"btn__icon"},[i("svgicon",{attrs:{icon:t.theIcon}})],1):t._e(),t.$slots.default?i("span",{staticClass:"btn__content",class:{loading:t.loading}},[t.loading?i("span",{staticClass:"btn__loading"},[i("svgicon",{attrs:{icon:"spinner"}})],1):t._e(),i("span",{staticClass:"btn__text"},[t._t("default")],2)]):t._e()])},St=[],Ut={name:"ui-button",props:{icon:{required:!1,default:null,type:String},text:{required:!1,default:!1},outline:{required:!1,default:!1},alt:{required:!1,default:!1},round:{required:!1,default:!1},size:{required:!1,default:"m"},color:{required:!1,default:"black"},loading:{required:!1,default:!1},href:{required:!1,default:!1},markup:{required:!1,default:"button"},to:{required:!1}},data:function(){return{theIcon:this.icon,theMarkup:"button",classes:[]}},computed:{toData:function(){return this.to?this.to:("router-link"===this.markup||"a"===this.markup)&&""}},mounted:function(){this.loading&&(this.theIcon="spinner")},created:function(){!1!==this.href&&(this.theMarkup="a"),this.setClasses()},methods:{getLoadingClass:function(){return this.loading?" loading":""},setClasses:function(){var t=[];t.push("btn"),!1!==this.text?t.push("btn--text"):!1===this.alt&&(this.icon&&t.push("btn--icon"),!1!==this.outline?t.push("outline"):t.push("plain")),!1!==this.alt&&t.push("btn--alt"),t.push("btn--"+this.size.toLowerCase()),t.push("btn--"+this.color.toLowerCase()),this.$slots.default||t.push("btn--noslot"),!1!==this.round&&t.push("btn--round"),this.classes=t},removeClass:function(t){this.classes=this.classes.filter((function(e){return e!=t}))}},watch:{loading:function(t){this.$slots.default||(this.theIcon=t?"spinner":this.icon)},color:function(){this.setClasses()}}},Tt=Ut,zt=(i("eeb2"),Object(h["a"])(Tt,qt,St,!1,null,null,null)),Et=zt.exports;n["default"].prototype.$pictifly=window.pictifly,n["default"].config.productionTip=!1,n["default"].mixin(xt),n["default"].component("svgicon",Rt),n["default"].component("ui-button",Et),new n["default"]({store:wt,render:function(t){return t(_t)}}).$mount("#app")},"5c0b":function(t,e,i){"use strict";var n=i("9c0c"),o=i.n(n);o.a},"6c8a":function(t,e,i){"use strict";var n=i("9ac1"),o=i.n(n);o.a},"7ac9":function(t,e,i){"use strict";var n=i("ffc4"),o=i.n(n);o.a},8461:function(t,e,i){"use strict";var n=i("0a69"),o=i.n(n);o.a},9301:function(t,e,i){},"9ac1":function(t,e,i){},"9c0c":function(t,e,i){},b437:function(t,e,i){},caa2:function(t,e,i){},cd0c:function(t,e,i){"use strict";var n=i("437a"),o=i.n(n);o.a},ced4:function(t,e,i){},e0a0:function(t,e,i){"use strict";var n=i("ced4"),o=i.n(n);o.a},e4a5:function(t,e,i){"use strict";var n=i("caa2"),o=i.n(n);o.a},eeb2:function(t,e,i){"use strict";var n=i("b437"),o=i.n(n);o.a},f308:function(t,e,i){"use strict";var n=i("9301"),o=i.n(n);o.a},ffc4:function(t,e,i){}});
//# sourceMappingURL=app.4afc975e.js.map